name: TodayDevBranchCreate
run-name: TodayDevBranchCreate ðŸš€
  #on:
  #  schedule:
  #    - cron: '0 0 * * *' # JST 00:00 (æ¯Žæ—¥)
on: workflow_dispatch

jobs:
  MergeBranch:
    timeout-minutes: 1
    runs-on: ubuntu-22.04
    steps:
      - name: Check Out Repository
        uses: actions/checkout@v2
      - name: Get Date
        id: date
        run: |
          echo "BRANCH_NAME=dev-$(TZ=Asia/Tokyo date '+%m%d')" >> $GITHUB_ENV
        shell: bash
      - name: Check today Branch
        id: check_branch
        run: |
          if git show-ref --quiet "refs/heads/${{ env.BRANCH_NAME }}"; then
            echo "Today Branch exists."
          else
            echo "Branch ${{ env.BRANCH_NAME }} does not exist."

            BASE_BRANCH="main"

            git checkout -b ${{ env.BRANCH_NAME }} $BASE_BRANCH
            git push origin ${{ env.BRANCH_NAME }}
          fi
        shell: bash
